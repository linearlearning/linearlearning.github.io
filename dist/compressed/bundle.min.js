!function t(e,r,i){function o(n,s){if(!r[n]){if(!e[n]){var u="function"==typeof require&&require;if(!s&&u)return u(n,!0);if(a)return a(n,!0);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}var c=r[n]={exports:{}};e[n][0].call(c.exports,function(t){var r=e[n][1][t];return o(r?r:t)},c,c.exports,t,e,r,i)}return r[n].exports}for(var a="function"==typeof require&&require,n=0;n<i.length;n++)o(i[n]);return o}({1:[function(t,e,r){function i(t){this.x=t.x||300,this.y=t.y||300,this.width=t.width||40,this.height=t.height||40,this.ttl=t.ttl,this.id=t.id||"random",this.type=t.type||"output"}i.prototype.updateColor=function(t){this.color=t},i.prototype.init=function(){this.drawTarget()},i.prototype.drawTarget=function(){var t=Math.floor(19*Math.random())+1,e=this.x-this.width/2,r=this.y-this.height/2,i=d3.select("#"+this.type+"-svg").append("rect").attr({x:e,y:r,width:this.width,height:this.height,id:this.id});i.style({fill:"url(#tar"+t+")"})},e.exports=i},{}],2:[function(t,e,r){function i(t){this.head={x:t.head.x||250,y:t.head.y||250},this.tail={x:t.tail.x||250,y:t.tail.y||250},this.color=t.color||"#92989F",this.type=t.type||"input",this.stroke=t.stroke||8}i.prototype.init=function(){this.drawVector()},i.prototype.drawVector=function(){this.type?d3.select("#"+this.type+"-svg").append("path").attr({stroke:this.color,"stroke-width":this.stroke,d:this.generatePath(),id:this.type+"-vector"}):console.log("Invalid vector type: ",this.type)},i.prototype.generatePath=function(){return"M"+this.tail.x+" "+this.tail.y+" L"+this.head.x+" "+this.head.y+" z"},e.exports=i},{}],3:[function(t,e,r){function o(t){this.minX=t.minX||-10,this.minY=t.minY||-10,this.maxX=t.maxX||10,this.maxY=t.maxY||10,this.pixelWidth=t.pixelWidth||400,this.pixelHeight=t.pixelHeight||400,this.originX=this.pixelWidth*-this.minX/(this.maxX-this.minX)||200,this.originY=this.pixelHeight*-this.minY/(this.maxY-this.minY)||200,this.origin={x:this.originX,y:this.originY},this.type=t.type||"not a valid type",this.timer=t.timer||this.getTimer()}var a=t("../sauron/sauron.js"),n=new a({}),s=t("../tutorial/tutorial.js"),u=t("../utilities/math.js");o.prototype.vectorDrag=function(){return self=this,d3.behavior.drag().on("dragstart",function(){n.tellSauron(d3.mouse(this),"drag"),s.tutorialControl(2,500);var t=self.getTimer();t-self.timer<=200&&n.tellSauron(d3.mouse(this),"dbclick"),self.timer=t}).on("drag",function(){n.tellSauron(d3.mouse(this),"drag"),s.tutorialControl(3,500)})},o.prototype.getCanvas=function(t){var e=t||this.type;return d3.select("#"+e+"-canvas")},o.prototype.getSvg=function(t){var e=t||this.type;return d3.select("#"+e+"-svg")},o.prototype.getDefs=function(t){var e=t||this.type;return d3.select("#"+e+"-defs")},o.prototype.getTar=function(t){return d3.select("#tar"+t)},o.prototype.appendSvg=function(t){var e=t||this.type;this.getCanvas(e).append("svg").attr({id:e+"-svg",width:this.pixelWidth,height:this.pixelHeight})},o.prototype.appendImageToPattern=function(){if("output"===this.type){for(i=1;i<20;i++){var t=this.getTar(i);t.append("image").attr({x:"0",y:"0",width:"40",height:"40","xlink:href":"../public/img/items/glow/target"+i+".gif"})}var e=this.getTar("arm");e.append("image").attr({x:"0",y:"0",width:"30px",height:"100px","xlink:href":"../public/img/robotarm.gif"})}if("input"===this.type){var r=this.getTar("blip");r.append("image").attr({x:"0",y:"0",width:"40",height:"40","xlink:href":"../public/img/blip.gif"})}},o.prototype.appendPatternToDefs=function(){var t=this.getDefs();if("output"===this.type){for(i=1;i<20;i++)t.append("pattern").attr({id:"tar"+i,x:"0",y:"0",height:"40",width:"40"});t.append("pattern").attr({id:"tararm",x:"0",y:"0",height:"100px",width:"30px"})}"input"===this.type&&t.append("pattern").attr({id:"tarblip",x:"0",y:"0",height:"40",width:"40"})},o.prototype.appendDefsToSvg=function(){var t=this.getSvg();t.append("defs").attr("id",this.type+"-defs")},o.prototype.drawCanvas=function(){return this.type?(this.appendSvg(),void("input"===this.type?(this.getCanvas().call(this.vectorDrag()),this.drawTargetsOnCanvas()):"output"===this.type&&this.drawTargetsOnCanvas())):void console.log("Invalid Canvas Type")},o.prototype.drawTargetsOnCanvas=function(){this.appendDefsToSvg(),this.appendPatternToDefs(),this.appendImageToPattern()},o.prototype.drawProgressBar=function(){var t=d3.select("#progress-container");t.append("div").attr({"class":"progress-bar progress-bar-success progress-bar-striped active",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",id:"progressbar"}),t.append("span").attr({id:"score","class":"sr-only"})},o.prototype.proximity=function(t,e){u.isClose(targetX,targetY,500)?e.updateColor("#e5e5ff",e.id):u.isClose(targetX,targetY,450)?e.updateColor("#ccccff",e.id):u.isClose(targetX,targetY,400)?e.updateColor("#b2b2ff",e.id):u.isClose(targetX,targetY,350)?e.updateColor("#9999ff",e.id):u.isClose(targetX,targetY,300)?e.updateColor("#7f7fff",e.id):u.isClose(targetX,targetY,250)?e.updateColor("#6666ff",e.id):u.isClose(targetX,targetY,200)?e.updateColor("#4c4cff",e.id):u.isClose(targetX,targetY,150)?e.updateColor("#3232ff",e.id):u.isClose(targetX,targetY,100)?e.updateColor("#1919ff",e.id):u.isClose(targetX,targetY,50)&&e.updateColor("#0000ff",e.id)},o.prototype.drawTarget=function(t){d3.select("#"+this.type+"-canvas").append("circle").attr({cx:t.x,cy:t.y,r:t.r,color:t.color})},o.prototype.getTimer=function(){var t=new Date;return t.getTime()},e.exports=o},{"../sauron/sauron.js":12,"../tutorial/tutorial.js":13,"../utilities/math.js":14}],4:[function(t,e,r){e.exports={inputCanvasSettings:{type:"input",minX:-10,minY:-10,maxX:10,maxY:10,pixelWidth:500,pixelHeight:500},outputCanvasSettings:{type:"output",minX:-10,minY:-10,maxX:10,maxY:10,pixelWidth:500,pixelHeight:500},inputVectorSettings:{type:"input",tail:{x:null,y:null},head:{x:null,y:null}},outputVectorSettings:{type:"output",tail:{x:null,y:null},head:{x:null,y:null},stroke:9},targetSettings:{x:355,y:50,r:20},sauron:{matrix:[[1,2],[2,1]],level:1,type:"random"}}},{}],5:[function(t,e,r){function i(){var t=new a(c.inputCanvasSettings),e=new n(c.inputVectorSettings),r=new n(c.outputVectorSettings),i=new a(c.outputCanvasSettings),o=new s(c.targetSettings);t.drawCanvas(),i.drawCanvas(),i.drawProgressBar(),e.init(),r.init(),o.init()}function o(){$(window).ready(function(){p.init(),$("#guide").click(function(t){var e=document.getElementById("guide"),r=document.getElementById("tutorial");p.show&&(t.target!=r&&t.target!=e||!p.reopen)&&(p.clearTimer(),$("#tutorial").popover("hide"),p.show=!1,p.reopen=!0)}),$("#tutorial").click(function(t){!p.show&&p.reopen&&p.tutorialControl(--p.num,1,!0)}),p.tutorialControl(1,1e3)})}var a=t("../canvas/canvas.js"),n=t("../actors/vector.js"),s=t("../actors/target.js"),u=t("../sauron/sauron.js"),p=t("../tutorial/tutorial.js"),c=t("./config.js");new u(c.sauron);startLevel1=function(){i(),o()}},{"../actors/target.js":1,"../actors/vector.js":2,"../canvas/canvas.js":3,"../sauron/sauron.js":12,"../tutorial/tutorial.js":13,"./config.js":4}],6:[function(t,e,r){setTimeout(function(){$(".infoLeft").fadeIn()},5e3)},{}],7:[function(t,e,r){e.exports={inputCanvasSettings:{type:"input",minX:-10,minY:-10,maxX:10,maxY:10,pixelWidth:500,pixelHeight:500},outputCanvasSettings:{type:"output",minX:-10,minY:-10,maxX:10,maxY:10,pixelWidth:500,pixelHeight:500},inputVectorSettings:{type:"input",tail:{x:null,y:null},head:{x:null,y:null},stroke:9},outputVectorSettings:{type:"output",tail:{x:null,y:null},head:{x:null,y:null}},sauron:{matrix:[[1,2],[2,1]],level:2,type:"line"}}},{}],8:[function(t,e,r){function i(){var t=new o(s.inputCanvasSettings),e=new a(s.inputVectorSettings),r=new a(s.outputVectorSettings),i=new o(s.outputCanvasSettings);t.drawCanvas(),i.drawCanvas(),i.drawProgressBar(),e.init(),r.init(),u.generateRandomLineofDeath()}var o=t("../canvas/canvas.js"),a=t("../actors/vector.js"),n=(t("../actors/target.js"),t("../sauron/sauron.js")),s=t("./config.js"),u=new n(s.sauron);startLevel2=function(){i()}},{"../actors/target.js":1,"../actors/vector.js":2,"../canvas/canvas.js":3,"../sauron/sauron.js":12,"./config.js":7}],9:[function(t,e,r){e.exports={inputCanvasSettings:{type:"input",minX:-10,minY:-10,maxX:10,maxY:10,pixelWidth:500,pixelHeight:500},outputCanvasSettings:{type:"output",minX:-10,minY:-10,maxX:10,maxY:10,pixelWidth:500,pixelHeight:500},inputVectorSettings:{type:"input",tail:{x:null,y:null},head:{x:null,y:null},stroke:9},outputVectorSettings:{type:"output",tail:{x:null,y:null},head:{x:null,y:null}},sauron:{matrix:[[1,2],[2,1]],level:3,type:"circle"}}},{}],10:[function(t,e,r){function i(){var t=new o(config.inputCanvasSettings),e=new a(config.inputVectorSettings),r=new a(config.outputVectorSettings),i=new o(config.outputCanvasSettings);t.drawCanvas(),i.drawCanvas(),i.drawProgressBar(),e.init(),r.init(),OverWatcher.generateRandomCircleofDeath()}var o=t("../canvas/canvas.js"),a=t("../actors/vector.js"),n=(t("../actors/target.js"),t("../sauron/sauron.js"));config=t("./config.js"),OverWatcher=new n(config.sauron),startLevel3=function(){i()}},{"../actors/target.js":1,"../actors/vector.js":2,"../canvas/canvas.js":3,"../sauron/sauron.js":12,"./config.js":9}],11:[function(t,e,r){setTimeout(function(){$(".infoLeft").fadeIn()},5e3)},{}],12:[function(t,e,r){function o(t){this.matrix=[[1,2],[2,1]],this.armies=[],this.level=t==={}?-1:t.level}var a=t("../utilities/math.js"),n=t("../actors/target.js"),s=t("../tutorial/tutorial.js");o.prototype.applyTransformation=function(t,e,r){var r=this.matrix,i=a.screenToMath(t,e),o=[r[0][0]*i[0]+r[0][1]*i[1],r[1][0]*i[0]+r[1][1]*i[1]];return a.mathToScreen(o[0],o[1])},o.prototype.updateInputVector=function(t){this.removeVector("input"),d3.select("#input-svg").append("path").attr({stroke:"#31BA29","stroke-width":"8",d:"M 250 250 L"+t.x+" "+t.y+"z",id:"input-vector"})},o.prototype.removeVector=function(t){d3.select("#"+t+"-vector").remove()},o.prototype.updateOutputVector=function(t){var e=a.applyMatrix(t.x,t.y,this.matrix);this.removeVector("output");var r=Math.sqrt((250-e[0])*(250-e[0])+(250-e[1])*(250-e[1])),i=-1*Math.atan((e[0]-250)/(e[1]-250))*180/Math.PI;e[1]>250&&(i+=180);var o=20,n="none";300>r&&(n="xMinYMin slice"),d3.select("#output-svg").append("image").attr({x:e[0],y:e[1],width:""+o+"px",height:""+r+"px",preserveAspectRatio:n,"xlink:href":"../public/img/robotarm.gif",id:"output-vector",transform:"rotate("+i+","+e[0]+","+e[1]+")"})},o.prototype.getArmies=function(){return d3.select("#output-svg").selectAll("rect")[0]},o.prototype.updateTargets=function(t,e){var r=this.getArmies();for(elem in r)if("output-svg"!==r[elem].id){var o=r[elem].id,n=d3.select("#"+o);width=Number(n.attr("width")),height=Number(n.attr("height")),x=Number(n.attr("x"))+width/2,y=Number(n.attr("y"))+height/2,i=a.applyMatrix(t.x,t.y,this.matrix),a.isClose(i[0],i[1],x,y,width/2,height/2)&&("collision"===e?(n.remove(),this.updateProgress(),this.drawBlips(x,y),r.length-1===0&&this.generateNewTargets(o)):"detection"===e&&s.tutorialControl(4,1))}},o.prototype.checkNumberOfBlips=function(){return d3.select("#input-svg").selectAll("circle")[0].length},o.prototype.removeBlips=function(){d3.select("#input-svg").selectAll("circle").transition().style("opacity",0).duration(2e3),setTimeout(function(){d3.select("#input-svg").selectAll("circle").remove()},2100)},o.prototype.generateNewTargets=function(t){-1!==t.indexOf("random")?(this.checkNumberOfBlips()>=5&&this.removeBlips(),this.generateTarget()):-1!==t.indexOf("line")?(this.removeBlips(),this.generateRandomLineofDeath()):-1!==t.indexOf("circle")&&(this.removeBlips(),this.generateRandomCircleofDeath())},o.prototype.tellSauron=function(t,e){var r=this.convertMouseToCoord(t);"drag"===e?(this.updateInputVector(r),this.updateOutputVector(r),s.show&&s.reopen||this.updateTargets(r,"detection")):"dbclick"===e&&this.updateTargets(r,"collision")},o.prototype.convertMouseToCoord=function(t){return{x:t[0],y:t[1]}},o.prototype.updateProgress=function(){var t=d3.select("#progressbar"),e=d3.select("#score");currScore=t.attr("aria-valuenow"),Number(currScore)>=100?(currScore=100,e.text("Proceed To Next Level!")):(this.level<=1?currScore=Number(currScore)+5:currScore=Number(currScore)+100/24,e.text(currScore+"% Complete")),t.style("width",currScore+"%"),t.attr("aria-valuenow",currScore)},o.prototype.generateTarget=function(){var t=!1,e=this.matrix;for(e[0][0]*e[1][1]-e[0][1]*e[1][0];!t;){var r={x:a.getRandom(0,500),y:a.getRandom(0,500)};if(a.isOnScreen(e,r)){t=!0;var i={x:r.x,y:r.y,width:40,height:40,color:"black",id:"random"};this.drawTarget(i)}}},o.prototype.drawBlips=function(t,e){var r=a.applyInverse(t,e,this.matrix);d3.select("#input-svg").append("circle").attr({cx:r.x,cy:r.y,r:20}).style({fill:"url(#tarblip)"})},o.prototype.generateRandomCircleofDeath=function(){var t=a.getValidPreImageCircle(),e=0;for(var r in t){var i=t[r],o=a.mathToScreen(i.x,i.y,this.matrix),n={x:o[0],y:o[1],width:40,height:40,color:"black",id:"circle_"+e};this.drawTarget(n),e++}},o.prototype.generateRandomLineofDeath=function(){var t=a.getValidPreImagePairs(),e=0;for(var r in t){var i=t[r],o=a.mathToScreen(i.x,i.y,this.matrix),n={x:o[0],y:o[1],width:40,height:40,color:"black",id:"line_"+e};this.drawTarget(n),e++}},o.prototype.drawTarget=function(t){var e=new n(t);e.drawTarget()},e.exports=o},{"../actors/target.js":1,"../tutorial/tutorial.js":13,"../utilities/math.js":14}],13:[function(t,e,r){function i(t){this.num=1,this.show=!1,this.reopen=!1,this.timer=null}i.prototype.init=function(){$("#tutorial").popover()},i.prototype.tutorialControl=function(t,e,r){tutor=this,this.show&&this.reopen||t!=this.num||(1===t&&(this.num++,d3.select("#tutorial").attr("data-content","Click the radar screen to activate the robot arm!")),2===t&&(this.num++,d3.select("#tutorial").attr("data-content","Click and drag the arm in the radar screen to move the robot's arm!")),3===t&&(this.num++,d3.select("#tutorial").attr("data-content","Help the robot reach the parts. Move the arm on the input screen so that his arm can pick up the pieces.")),4===t&&(this.num++,d3.select("#tutorial").attr("data-content","Double click the radar screen to collect the part")),setTimeout(function(){$("#tutorial").popover("show"),tutor.show=!0,tutor.reopen=!1},e),r||(tutor.setTimer(1e4),tutor.show=!1,tutor.reopen=!0))},i.prototype.clearTimer=function(){clearTimeout(this.timer)},i.prototype.setTimer=function(t){this.timer=setTimeout(function(){$("#tutorial").popover("hide")},t)},e.exports=new i},{}],14:[function(t,e,r){e.exports={screenToMath:function(t,e){return[10*(t-250)/250,10*-(e-250)/250]},mathToScreen:function(t,e){return[250*t/10+250,250*-e/10+250]},applyInverse:function(t,e,r){var i=r[0][0]*r[1][1]-r[0][1]*r[1][0],o=this.screenToMath(t,e),a=(r[1][1]*o[0]-r[0][1]*o[1])/i,n=(-r[1][0]*o[0]+r[0][0]*o[1])/i,o=this.mathToScreen(a,n);return{x:o[0],y:o[1]}},applyMatrix:function(t,e,r){var i=this.screenToMath(t,e),o=[r[0][0]*i[0]+r[0][1]*i[1],r[1][0]*i[0]+r[1][1]*i[1]];return this.mathToScreen(o[0],o[1])},getRandom:function(t,e){return Math.random()*(e-t)+t},isClose:function(t,e,r,i,o,a){return Math.abs(r-t)<=o&&Math.abs(i-e)<=a},isOnScreen:function(t,e){var r=this.screenToMath(e.x,e.y),i=t[0][0]*t[1][1]-t[0][1]*t[1][0],o=(t[1][1]*r[0]-t[0][1]*r[1])/i,a=(-t[1][0]*r[0]+t[0][0]*r[1])/i;return r=this.mathToScreen(o,a),r[0]>=0&&r[0]<=500&&r[1]>=0&&r[1]<=500},getValidPreImageCircle:function(){for(var t=[],e=Math.random()*Math.PI,r=4*Math.random()+4,i=0;8>i;i++)t.push({x:r*Math.cos(e),y:r*Math.sin(e)}),e+=Math.PI/4;return t},getValidPreImagePairs:function(){for(var t=[],e=[1.5,4.5,7.5],r=Math.PI*Math.random(),i=Math.cos(r),o=Math.sin(r),a=0;a<e.length;a++)t.push({x:e[a]*i,y:e[a]*o}),t.push({x:-1*e[a]*i,y:-1*e[a]*o});return t}}},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14]);